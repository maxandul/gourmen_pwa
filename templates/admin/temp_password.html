{% extends "base.html" %}

{% block title %}Tempor√§res Passwort - Admin{% endblock %}

{% block content %}
<div class="container">
    <div class="card">
        <div class="card-header">
            <h1>üîê Tempor√§res Passwort</h1>
            <p class="text-muted">Passwort wurde erfolgreich zur√ºckgesetzt</p>
        </div>
        
        <div class="card-body">
            <div class="password-display">
                <h3>üìã Mitglied</h3>
                <p class="member-name">{{ member_name }}</p>
                
                <h3>üîë Neues Passwort</h3>
                <div class="password-container">
                    <input type="text" 
                           id="password-display" 
                           value="{{ password }}" 
                           class="form-control password-input" 
                           readonly>
                    <button type="button" 
                            class="btn btn-primary copy-btn" 
                            onclick="copyPassword()">
                        üìã Kopieren
                    </button>
                </div>
                
                <div class="password-info">
                    <p><strong>‚ö†Ô∏è Wichtig:</strong></p>
                    <ul>
                        <li>Dieses Passwort ist nur <strong>5 Minuten</strong> verf√ºgbar</li>
                        <li>Kopieren Sie es sofort und leiten Sie es sicher weiter</li>
                        <li>Das Mitglied muss das Passwort beim n√§chsten Login √§ndern</li>
                    </ul>
                </div>
            </div>
            
            <div class="actions">
                <button type="button" 
                        class="btn btn-success" 
                        onclick="copyPassword()">
                    üìã Passwort kopieren
                </button>
                <a href="{{ url_for('admin.members') }}" 
                   class="btn btn-secondary">
                    ‚Üê Zur√ºck zur Mitgliederliste
                </a>
            </div>
        </div>
    </div>
</div>

<script>
function copyPassword() {
    const passwordInput = document.getElementById('password-display');
    passwordInput.select();
    passwordInput.setSelectionRange(0, 99999); // For mobile devices
    
    try {
        document.execCommand('copy');
        showToast('Passwort wurde kopiert!', 'success');
    } catch (err) {
        // Fallback for modern browsers
        navigator.clipboard.writeText(passwordInput.value).then(function() {
            showToast('Passwort wurde kopiert!', 'success');
        }).catch(function() {
            showToast('Kopieren fehlgeschlagen. Bitte manuell kopieren.', 'error');
        });
    }
}

function showToast(message, type) {
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.textContent = message;
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#28a745' : '#dc3545'};
        color: white;
        padding: 15px 20px;
        border-radius: 5px;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    `;
    
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.remove();
    }, 3000);
}
</script>

<style>
.password-display {
    text-align: center;
    margin-bottom: 30px;
}

.member-name {
    font-size: 1.2em;
    font-weight: bold;
    color: var(--primary-color);
    margin-bottom: 20px;
}

.password-container {
    display: flex;
    gap: 10px;
    justify-content: center;
    align-items: center;
    margin: 20px 0;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
}

.password-input {
    font-family: 'Courier New', monospace;
    font-size: 1.1em;
    font-weight: bold;
    text-align: center;
    background: #f8f9fa;
    border: 2px solid #dee2e6;
    border-radius: 5px;
    padding: 10px;
    flex: 1;
}

.copy-btn {
    white-space: nowrap;
    padding: 10px 15px;
}

.password-info {
    background: rgba(255, 193, 7, 0.1);
    border: 1px solid #ffc107;
    border-radius: 8px;
    padding: 20px;
    margin: 20px 0;
    text-align: left;
}

.password-info ul {
    margin: 10px 0 0 20px;
}

.password-info li {
    margin: 5px 0;
}

.actions {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 30px;
}

@media (max-width: 768px) {
    .password-container {
        flex-direction: column;
    }
    
    .actions {
        flex-direction: column;
        align-items: center;
    }
}
</style>
{% endblock %}
