<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offline - Gourmen</title>
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="icon" href="/static/favicon.ico">
    <link rel="apple-touch-icon" href="/static/img/apple-touch-icon.png">
    <meta name="theme-color" content="#354e5e">
</head>
<body>
    <div class="offline-container">
        <div class="offline-content">
            <div class="offline-icon">
                üì°
            </div>
            
            <h1>Keine Internetverbindung</h1>
            
            <p class="offline-message">
                Es scheint, als h√§ttest du keine Internetverbindung. 
                Einige Funktionen der Gourmen App sind m√∂glicherweise nicht verf√ºgbar.
            </p>
            
            <div class="offline-features">
                <h3>Verf√ºgbare Offline-Funktionen:</h3>
                <ul>
                    <li>‚úÖ Bereits geladene Seiten anzeigen</li>
                    <li>‚úÖ Gecachte Daten abrufen</li>
                    <li>‚úÖ App-Navigation</li>
                    <li>‚úÖ Lokale Einstellungen</li>
                </ul>
            </div>
            
            <div class="offline-actions">
                <button class="btn btn-primary" onclick="window.location.reload()">
                    üîÑ Seite neu laden
                </button>
                
                <button class="btn btn-secondary" onclick="window.history.back()">
                    ‚Üê Zur√ºck
                </button>
                
                <button class="btn btn-accent" onclick="window.location.href='/'">
                    üè† Startseite
                </button>
            </div>
            
            <div class="offline-status">
                <p>
                    <strong>Status:</strong> 
                    <span id="connection-status">Offline</span>
                </p>
                <p>
                    <strong>Letzte Synchronisation:</strong> 
                    <span id="last-sync">Unbekannt</span>
                </p>
            </div>
        </div>
    </div>

    <style>
        .offline-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--background-secondary), var(--background-tertiary));
        }
        
        .offline-content {
            max-width: 500px;
            width: 100%;
            text-align: center;
            background: var(--background-primary);
            padding: 40px 30px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
        }
        
        .offline-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        .offline-message {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .offline-features {
            background: var(--background-secondary);
            padding: 20px;
            border-radius: var(--border-radius-md);
            margin: 30px 0;
            text-align: left;
        }
        
        .offline-features h3 {
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        
        .offline-features ul {
            list-style: none;
            padding: 0;
        }
        
        .offline-features li {
            padding: 8px 0;
            color: var(--text-secondary);
        }
        
        .offline-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .offline-status {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--background-tertiary);
            font-size: 14px;
            color: var(--text-muted);
        }
        
        .offline-status p {
            margin: 8px 0;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @media (max-width: 768px) {
            .offline-content {
                padding: 30px 20px;
            }
            
            .offline-actions {
                flex-direction: column;
            }
            
            .offline-icon {
                font-size: 60px;
            }
        }
    </style>

    <script>
        // Offline Status Management
        function updateConnectionStatus() {
            const statusElement = document.getElementById('connection-status');
            const lastSyncElement = document.getElementById('last-sync');
            
            if (navigator.onLine) {
                statusElement.textContent = 'Online';
                statusElement.style.color = 'var(--success-color)';
                
                // Update last sync time
                const now = new Date();
                lastSyncElement.textContent = now.toLocaleString('de-DE');
                
                // Redirect to home after 3 seconds if online
                setTimeout(() => {
                    window.location.href = '/';
                }, 3000);
            } else {
                statusElement.textContent = 'Offline';
                statusElement.style.color = 'var(--error-color)';
            }
        }
        
        // Event listeners
        window.addEventListener('online', updateConnectionStatus);
        window.addEventListener('offline', updateConnectionStatus);
        
        // Initial status check
        updateConnectionStatus();
        
        // Check connection every 5 seconds
        setInterval(updateConnectionStatus, 5000);
        
        // Service Worker Registrierung (Root-Scope)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => {
                    console.log('Service Worker registered for offline page');
                })
                .catch(error => {
                    console.error('Service Worker registration failed:', error);
                });
        }
    </script>
</body>
</html>



